{% form_theme form 'Ui/Form/theme.html.twig' %}

<section>
    <div class="container">
        <div class="row mt-5 pt-3">
            <div class="col-lg-9 col-md-8 col-12 mt-1">
                <div class="card mx-md-3">
                    <div class="card-body ">
                        <h1 class="text-center h1 pt-2 mb-3">
                            <strong class="text-primary font-weight-600">{{ post.title }}</strong>
                        </h1>
                        <div class="row">
                            <div class="col-md-12 col-xl-12 d-flex justify-content-center">
                                <p class="font-small dark-grey-text mb-1">
                                    <strong>Auteur:</strong> {{ post.user }}</p>
                                <p class="font-small grey-text mb-0 ml-3">
                                    <i class="far fa-clock-o dark-grey-text"></i>
                                    {{ post.publishedAt|date('d/m/Y') }} Ã  {{ post.published|date('H\\h:i\\m\\i\\n') }}
                                </p>
                            </div>
                        </div>

                        <div class="row pt-lg-5 pt-3">
                            <div class="col-md-12 mb-4">
                                <img src="{{ vich_uploader_asset(post, 'file') }}" class="img-fluid z-depth-1 rounded-0" alt="sample image">
                            </div>
                            <div class="col-md-12 col-xl-12">
                                {{ post.content|raw }}

                                <hr class="mt-5">
                            </div>
                        </div>

                        {% if post.comments|length > 0 %}
                            <div class="row">
                                <div class="col-12">
                                    <section>
                                        <div class="comments-list text-center text-lg-left">
                                            <div class="text-center my-5">
                                                <h3 class="font-weight-bold">Commentaires
                                                    <span class="badge bg-secondary">{{ post.comments|length }}</span>
                                                </h3>
                                            </div>

                                            {% for comment in post.comments %}
                                                <div class="row mb-5">
                                                    <div class="col-12">
                                                        <a>
                                                            <h5 class="user-name font-weight-bold">{{ comment.name }}</h5>
                                                        </a>
                                                        <div class="card-data">
                                                            <ul class="list-unstyled">
                                                                <li class="comment-date font-small">
                                                                    <i class="far fa-clock-o"></i> {{ comment.createdAt|date('d/m/Y') }}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <p class="dark-grey-text article">
                                                            {{ comment.content }}
                                                        </p>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </section>
                                </div>
                            </div>
                        {% endif %}

                        <div class="row">
                            <div class="col-12">
                                <hr>

                                <section class="mb-4 wow fadeIn" data-wow-delay="0.2s">
                                    <h3 class="font-weight-500 text-center mt-5 mb-4">Votre commentaire</h3>

                                    {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'admin-form'}}) }}
                                    <P class="text-danger my-0">{{ form_errors(form) }}</P>

                                    {% include 'site/post/form.html.twig' %}

                                    {{ form_widget(form._token) }}

                                    <div class="d-flex justify-content-center mt-4">
                                        <div class="text-center">
                                            <button type="submit" class="btn btn-primary">Envoyer <i class="fas fa-paper-plane ml-1"></i></button>
                                        </div>
                                    </div>
                                    {{ form_end(form, {'render_rest': false}) }}
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

